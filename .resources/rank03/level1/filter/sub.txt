[EN]
Assignment name: filter
Expected files: filter.c
Allowed functions: read, write, strlen, memmem, memmove, malloc, calloc,
realloc, free, printf, fprintf, stdout, stderr, perror
--------------------------------------------------------------------------------

Write a program that will take one and only one argument.

Your program will then read from stdin and write all the content read in stdout
except that every occurrence of s must be replaced by '*' (as many as the length
of s). Your program will be tested with random buffer sizes, using a custom read
function. Therefore the buffer being set in your program will be filled with a
different number of chars each new call.


For example:

./filter bonjour
will behave in the same way as:
sed 's/bonjour/*******/g'

./filter abc
will behave in the same way as:
sed's/abc/***/g'

More generally your program must be the equivalent of the shell script filter.sh
present in this directory (you can compare your program with it).

In case of error during a read or a malloc, you must write "Error: " followed by
the error message in stderr and return 1.

If the program is called without arguments or with an empty argument or with multiple
arguments, it must return 1.

For example this should work:

$> echo 'abcdefaaaabcdeabcabcdabc' | ./filter abc | cat -e
***defaaa***de******d***$
$> echo 'ababcabababc' | ./filter ababc | cat -e
*****ab*****$
$>

NOTES:
memmem includes:
                #define _GNU_SOURCE
			    #include <string.h>

perror includes:
                #include <errno.h>

read includes:
                #include <fcntl.h>

[JA]
課題名: filter
提出ファイル: filter.c
使用可能な関数: read, write, strlen, memmem, memmove, malloc, calloc,
realloc, free, printf, fprintf, stdout, stderr, perror
--------------------------------------------------------------------------------

引数を1つだけ受け取るプログラムを作成してください。

プログラムは stdin から読み取り、読み取ったすべての内容を stdout に書き込みます。
ただし、s のすべての出現箇所を '*' に置き換える必要があります(s の長さと同じ数だけ)。
プログラムはカスタム read 関数を使用してランダムなバッファサイズでテストされます。
したがって、プログラムに設定されたバッファは、新しい呼び出しごとに異なる文字数で
満たされます。


例:

./filter bonjour
は以下と同じように動作します:
sed 's/bonjour/*******/g'

./filter abc
は以下と同じように動作します:
sed's/abc/***/g'

より一般的に、プログラムはこのディレクトリにあるシェルスクリプト filter.sh と
同等である必要があります(プログラムと比較できます)。

read または malloc 中にエラーが発生した場合、stderr に "Error: " に続けて
エラーメッセージを書き込み、1 を返す必要があります。

プログラムが引数なし、空の引数、または複数の引数で呼び出された場合、1 を返す必要があります。

例えば、以下のように動作する必要があります:

$> echo 'abcdefaaaabcdeabcabcdabc' | ./filter abc | cat -e
***defaaa***de******d***$
$> echo 'ababcabababc' | ./filter ababc | cat -e
*****ab*****$
$>

注意:
memmem のインクルード:
                #define _GNU_SOURCE
			    #include <string.h>

perror のインクルード:
                #include <errno.h>

read のインクルード:
                #include <fcntl.h>